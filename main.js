!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_enabled"},t=(e,t,r)=>{const o=e.querySelector(`#${t.id}-error`);t.classList.remove(r.inputErrorClass),o.classList.remove(r.errorClass),o.textContent=""},r=(e,t,r)=>{(e=>e.some((e=>!e.validity.valid)))(e)?o(t,r):(t.disabled=!1,t.classList.remove(r.inactiveButtonClass))},o=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},n=(e,r,o)=>{r.forEach((r=>{t(e,r,o)}))},a=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}editUserInfo(e){let{name:t,about:r}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}addNewCard(e){let{name:t,link:r}=e;return console.log(r),fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}deleteCard(e){let{_id:t}=e;return fetch(`${this._baseUrl}/cards/${t}`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}changeLiked(e){let{_id:t,isLiked:r}=e;return fetch(`${this._baseUrl}/cards/${t}/likes`,{method:r?"DELETE":"PUT",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}editAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"36b3b370-c3f7-447d-abe8-f5174d0c50a3","Content-Type":"application/json"}});a.getAppInfo().then((e=>{let[t,r]=e;t.forEach((e=>{const t=O(e);C.prepend(t)}));const o=r;document.querySelector(".profile__avatar").src=o.avatar,E.textContent=o.name,k.textContent=o.about})).catch((e=>{console.error(e)}));const s=document.querySelector("#delete-modal"),c=s.querySelector(".modal__close-button"),l=s.querySelector("#delete-post-cancel"),i=s.querySelector(".modal__delete-buttons"),d=document.querySelector(".profile__edit-button"),u=document.querySelector("#edit-profile"),m=document.querySelector("#edit-avatar"),_=(m.querySelector(".modal__submit_button"),m.querySelector(".modal__close-button")),h=m.querySelector("#avatar-input"),v=m.querySelector(".modal__form"),y=document.querySelector(".profile__avatar"),f=document.querySelector(".profile__avatar-button"),S=u.querySelector(".modal__close-button"),p=u.querySelector(".modal__form"),b=u.querySelector("#name-input"),q=u.querySelector("#description-input"),E=document.querySelector(".profile__name"),k=document.querySelector(".profile__description"),L=document.querySelector("#card-template"),C=document.querySelector(".cards__list"),g=document.querySelector("#new-post"),x=document.querySelector(".profile__post-button"),$=g.querySelector(".modal__close-button"),j=g.querySelector(".modal__form"),U=g.querySelector("#link-input"),P=g.querySelector("#caption-input"),w=document.querySelector("#preview-modal"),A=w.querySelector(".modal__image"),D=w.querySelector(".modal__image-caption"),I=w.querySelector(".modal__close-button_type_preview"),T=document.querySelector("#new-post-submit");let N,B;function O(e){const t=L.content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__title"),o=t.querySelector(".card__image"),n=t.querySelector(".card__like-button"),c=t.querySelector(".card__delete-button");return n.addEventListener("click",(t=>{!function(e,t){const r=e.target.classList.contains("card__like-button_clicked"),o=t;a.changeLiked({_id:o,isLiked:r}).then((()=>{e.target.classList.toggle("card__like-button_clicked")})).catch((e=>{console.error(e)}))}(t,e._id)})),c.addEventListener("click",(r=>{!function(e,t){N=e,B=t._id,J(s)}(t,e)})),o.addEventListener("click",(()=>{J(w),A.src=e.link,A.alt=o.alt,D.textContent=e.name})),r.textContent=e.name,o.src=e.link,o.alt=e.name,t}function J(e){e.classList.add("modal_opened"),e.addEventListener("mousedown",z),document.addEventListener("keydown",G)}function H(e){e.classList.remove("modal_opened"),e.removeEventListener("mousedown",z),document.removeEventListener("keydown",G)}function z(e){e.target.classList.contains("modal_opened")&&H(e.target)}function G(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&H(e)}}d.addEventListener("click",(()=>{b.value=E.textContent,q.value=k.textContent,n(p,[b,q],e),J(u)})),f.addEventListener("click",(()=>{n(v,[h],e),J(m)})),_.addEventListener("click",(()=>{H(m)})),x.addEventListener("click",(()=>{J(g)})),S.addEventListener("click",(()=>{H(u)})),$.addEventListener("click",(()=>{H(g)})),I.addEventListener("click",(()=>{H(w)})),c.addEventListener("click",(()=>{H(s)})),l.addEventListener("click",(()=>{H(s)})),j.addEventListener("submit",(function(t){t.preventDefault();const r=t.submitter;r.textContent="Saving...",a.addNewCard({name:P.value,link:U.value}).then((e=>{const t=O({name:e.value,link:e.value});C.prepend(t),H(g)})).catch((e=>{console.error(e)})).finally((()=>{r.textContent="Save"})),t.target.reset(),o(T,e)})),i.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;t.textContent="Deleting...",a.deleteCard({_id:B}).then((()=>{N.remove(),H(s)})).catch((e=>{console.error(e)})).finally((()=>{t.textContent="Delete"}))})),p.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;t.textContent="Saving...",a.editUserInfo({name:b.value,about:q.value}).then((e=>{E.textContent=e.name,k.textContent=e.about})).catch((e=>{console.error(e)})).finally((()=>{t.textContent="Save"})),H(u)})),v.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;t.textContent="Saving...",a.editAvatar(h.value).then((e=>{y.src=e.avatar,H(m)})).catch((e=>console.error(e))).finally((()=>{t.textContent="Save"}))})),(e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach((o=>{((e,o)=>{const n=Array.from(e.querySelectorAll(o.inputSelector)),a=e.querySelector(o.submitButtonSelector);r(n,a,o),n.forEach((s=>{s.addEventListener("input",(function(){((e,r,o)=>{r.validity.valid?t(e,r,o):((e,t,r,o)=>{const n=e.querySelector(`#${t.id}-error`);t.classList.add(o.inputErrorClass),n.classList.add(o.errorClass),n.textContent=r})(e,r,r.validationMessage,o)})(e,s,o),r(n,a,o)}))}))})(o,e)}))})(e)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVcwQixFQUFZK0MsT0FDdkJsRyxNQUFNeUUsSUFDTHBCLEVBQVloQixJQUFNb0MsRUFBSy9DLE9BQ3ZCb0UsRUFBVzdDLEVBQWdCLElBRTVCVCxPQUFPQyxHQUFReEIsUUFBUXlCLE1BQU1ELEtBQzdCNkQsU0FBUSxLQUNQRixFQUFhL0gsWUFBYyxNQUFNLEdBRXZDLElEdkppQ2YsS0FDZGtKLE1BQU1DLEtBQUtyRSxTQUFTc0UsaUJBQWlCcEosRUFBT0MsZUFDcEQwQixTQUFTbkIsSUFsQk02SSxFQUFDN0ksRUFBYVIsS0FDdEMsTUFBTWlCLEVBQVlpSSxNQUFNQyxLQUN0QjNJLEVBQVk0SSxpQkFBaUJwSixFQUFPRSxnQkFFaENnQixFQUFnQlYsRUFBWUcsY0FBY1gsRUFBT0csc0JBRXZEYSxFQUFrQkMsRUFBV0MsRUFBZWxCLEdBRTVDaUIsRUFBVVUsU0FBU2xCLElBQ2pCQSxFQUFha0gsaUJBQWlCLFNBQVMsV0FoRGhCMkIsRUFBQzlJLEVBQWFDLEVBQWNULEtBQ2hEUyxFQUFhWSxTQUFTQyxNQVF6QmYsRUFBZUMsRUFBYUMsRUFBY1QsR0F2QnZCdUosRUFBQy9JLEVBQWFDLEVBQWMrSSxFQUFjeEosS0FDL0QsTUFBTVUsRUFBZUYsRUFBWUcsY0FBYyxJQUFJRixFQUFhRyxZQUNoRUgsRUFBYUksVUFBVVksSUFBSXpCLEVBQU9LLGlCQUNsQ0ssRUFBYUcsVUFBVVksSUFBSXpCLEVBQU9NLFlBQ2xDSSxFQUFhSyxZQUFjeUksQ0FBWSxFQVlyQ0QsQ0FDRS9JLEVBQ0FDLEVBQ0FBLEVBQWFnSixrQkFDYnpKLEVBSUosRUF1Q0lzSixDQUFtQjlJLEVBQWFDLEVBQWNULEdBQzlDZ0IsRUFBa0JDLEVBQVdDLEVBQWVsQixFQUM5QyxHQUFFLEdBQ0YsRUFNQXFKLENBQWtCN0ksRUFBYVIsRUFBTyxHQUN0QyxFQ29NSjBKLENBQWlCMUosRSIsInNvdXJjZXMiOlsid2VicGFjazovL0luc2VydCBwcm9qZWN0IG5hbWUvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL0luc2VydCBwcm9qZWN0IG5hbWUvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vSW5zZXJ0IHByb2plY3QgbmFtZS8uL3NyYy91dGlscy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX2VuYWJsZWRcIixcbn07XG5cbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5lcnJvckNsYXNzKTtcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5lcnJvckNsYXNzKTtcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihcbiAgICAgIGZvcm1FbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLFxuICAgICAgY29uZmlnXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICB9XG59O1xuXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0LCBjb25maWcpID0+IHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG59O1xuXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbn07XG5cbmV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsZW1lbnQsIGlucHV0TGlzdCwgY29uZmlnKSA9PiB7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICB9KTtcbn07XG5cbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50LCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICApO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBjb25maWcpO1xuICB9KTtcbn07XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQge1xuICBlbmFibGVWYWxpZGF0aW9uLFxuICBjb25maWcsXG4gIHJlc2V0VmFsaWRhdGlvbixcbiAgZGlzYWJsZUJ1dHRvbixcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuXG5pbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjM2YjNiMzcwLWMzZjctNDQ3ZC1hYmU4LWY1MTc0ZDBjNTBhM1wiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmFwaVxuICAuZ2V0QXBwSW5mbygpXG4gIC50aGVuKChbY2FyZHMsIG1lXSkgPT4ge1xuICAgIGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRGaWxsID0gZ2V0Q2FyZFRlbXBsYXRlKGNhcmQpO1xuICAgICAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEZpbGwpO1xuICAgIH0pO1xuICAgIGNvbnN0IHVzZXJJbmZvID0gbWU7XG4gICAgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xuICAgIHByb2ZpbGVBdmF0YXIuc3JjID0gdXNlckluZm9bXCJhdmF0YXJcIl07XG4gICAgcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdXNlckluZm9bXCJuYW1lXCJdO1xuICAgIHByb2ZpbGVKb2JFbGVtZW50LnRleHRDb250ZW50ID0gdXNlckluZm9bXCJhYm91dFwiXTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH0pO1xuXG5jb25zdCBjYXJkRGVsZXRlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1tb2RhbFwiKTtcbmNvbnN0IGNhcmREZWxldGVDbG9zZUJ1dHRvbiA9IGNhcmREZWxldGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCJcbik7XG5jb25zdCBjYXJkRGVsZXRlQ2FuY2VsQnV0dG9uID0gY2FyZERlbGV0ZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI2RlbGV0ZS1wb3N0LWNhbmNlbFwiXG4pO1xuY29uc3QgY2FyZERlbGV0ZUZvcm0gPSBjYXJkRGVsZXRlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZGVsZXRlLWJ1dHRvbnNcIik7XG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGVcIik7XG5jb25zdCBlZGl0QXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtYXZhdGFyXCIpO1xuY29uc3QgYXZhdGFyU3VibWl0QnV0dG9uID0gZWRpdEF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19zdWJtaXRfYnV0dG9uXCJcbik7XG5jb25zdCBhdmF0YXJDbG9zZUJ1dHRvbiA9IGVkaXRBdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XG5jb25zdCBhdmF0YXJJbnB1dCA9IGVkaXRBdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1pbnB1dFwiKTtcbmNvbnN0IGF2YXRhckZvcm0gPSBlZGl0QXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGF2YXRhckltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5jb25zdCBlZGl0QXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnV0dG9uXCIpO1xuY29uc3QgZWRpdENsb3NlQnV0dG9uID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XG5jb25zdCBwcm9maWxlRm9ybUVsZW1lbnQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBuYW1lSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZS1pbnB1dFwiKTtcbmNvbnN0IGpvYklucHV0ID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZU5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZUpvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbmNvbnN0IG5ld1Bvc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3RcIik7XG5jb25zdCBuZXdQb3N0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19wb3N0LWJ1dHRvblwiKTtcbmNvbnN0IG5ld1Bvc3RDbG9zZUJ1dHRvbiA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XG5jb25zdCBuZXdQb3N0Rm9ybSA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgbGlua0lucHV0ID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbGluay1pbnB1dFwiKTtcbmNvbnN0IGNhcHRpb25JbnB1dCA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcHRpb24taW5wdXRcIik7XG5jb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3SW1hZ2UgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3Q2FwdGlvbiA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1jYXB0aW9uXCIpO1xuY29uc3QgcHJldmlld0Nsb3NlQnV0dG9uID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19jbG9zZS1idXR0b25fdHlwZV9wcmV2aWV3XCJcbik7XG5jb25zdCBuZXdQb3N0U3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXctcG9zdC1zdWJtaXRcIik7XG5cbmxldCBzZWxlY3RlZENhcmQ7XG5sZXQgc2VsZWN0ZWRDYXJkSWQ7XG5cbmZ1bmN0aW9uIGdldENhcmRUZW1wbGF0ZShkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgY29uc3QgY2FyZE5hbWVFbGVtZW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgY29uc3QgY2FyZEltYWdlRWxlbWVudCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gIGNvbnN0IGNhcmRMaWtlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgY29uc3QgY2FyZERlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcblxuICBjYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgIGhhbmRsZUxpa2UoZXZ0LCBkYXRhLl9pZCk7XG4gIH0pO1xuXG4gIGNhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICBoYW5kbGVDYXJkRGVsZXRlKGNhcmRFbGVtZW50LCBkYXRhKTtcbiAgfSk7XG5cbiAgY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICAgIHByZXZpZXdJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld0ltYWdlLmFsdCA9IGNhcmRJbWFnZUVsZW1lbnQuYWx0O1xuICAgIHByZXZpZXdDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICB9KTtcblxuICBjYXJkTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gIGNhcmRJbWFnZUVsZW1lbnQuc3JjID0gZGF0YS5saW5rO1xuICBjYXJkSW1hZ2VFbGVtZW50LmFsdCA9IGRhdGEubmFtZTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmREZWxldGUoY2FyZEVsZW1lbnQsIGRhdGEpIHtcbiAgc2VsZWN0ZWRDYXJkID0gY2FyZEVsZW1lbnQ7XG4gIHNlbGVjdGVkQ2FyZElkID0gZGF0YS5faWQ7XG4gIG9wZW5Nb2RhbChjYXJkRGVsZXRlTW9kYWwpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVMaWtlKGV2dCwgaWQpIHtcbiAgY29uc3QgaXNMaWtlZCA9IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fbGlrZS1idXR0b25fY2xpY2tlZFwiKTtcbiAgY29uc3QgY2FyZElkID0gaWQ7XG4gIGFwaVxuICAgIC5jaGFuZ2VMaWtlZCh7IF9pZDogY2FyZElkLCBpc0xpa2VkOiBpc0xpa2VkIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fY2xpY2tlZFwiKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZU92ZXJsYXlDbG9zZSk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY0tleSk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgbW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVPdmVybGF5Q2xvc2UpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NLZXkpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVPdmVybGF5Q2xvc2UoZXZ0KSB7XG4gIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xuICAgIGNsb3NlTW9kYWwoZXZ0LnRhcmdldCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlRXNjS2V5KGV2dCkge1xuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGNvbnN0IG9wZW5lZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XG4gICAgaWYgKG9wZW5lZE1vZGFsKSB7XG4gICAgICBjbG9zZU1vZGFsKG9wZW5lZE1vZGFsKTtcbiAgICB9XG4gIH1cbn1cblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50O1xuICBqb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGVKb2JFbGVtZW50LnRleHRDb250ZW50O1xuICByZXNldFZhbGlkYXRpb24ocHJvZmlsZUZvcm1FbGVtZW50LCBbbmFtZUlucHV0LCBqb2JJbnB1dF0sIGNvbmZpZyk7XG4gIG9wZW5Nb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn0pO1xuXG5lZGl0QXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHJlc2V0VmFsaWRhdGlvbihhdmF0YXJGb3JtLCBbYXZhdGFySW5wdXRdLCBjb25maWcpO1xuICBvcGVuTW9kYWwoZWRpdEF2YXRhck1vZGFsKTtcbn0pO1xuXG5hdmF0YXJDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKGVkaXRBdmF0YXJNb2RhbCk7XG59KTtcblxubmV3UG9zdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwobmV3UG9zdE1vZGFsKTtcbn0pO1xuXG5lZGl0Q2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn0pO1xuXG5uZXdQb3N0Q2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChuZXdQb3N0TW9kYWwpO1xufSk7XG5cbnByZXZpZXdDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKHByZXZpZXdNb2RhbCk7XG59KTtcblxuY2FyZERlbGV0ZUNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoY2FyZERlbGV0ZU1vZGFsKTtcbn0pO1xuXG5jYXJkRGVsZXRlQ2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoY2FyZERlbGV0ZU1vZGFsKTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBzdWJtaXRCdXR0b24gPSBldnQuc3VibWl0dGVyO1xuICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0aW5nLi4uXCI7XG4gIGFwaVxuICAgIC5kZWxldGVDYXJkKHsgX2lkOiBzZWxlY3RlZENhcmRJZCB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHNlbGVjdGVkQ2FyZC5yZW1vdmUoKTtcbiAgICAgIGNsb3NlTW9kYWwoY2FyZERlbGV0ZU1vZGFsKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBzdWJtaXRCdXR0b24gPSBldnQuc3VibWl0dGVyO1xuICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICBhcGlcbiAgICAuZWRpdEF2YXRhcihhdmF0YXJJbnB1dC52YWx1ZSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgYXZhdGFySW1hZ2Uuc3JjID0gZGF0YS5hdmF0YXI7XG4gICAgICBjbG9zZU1vZGFsKGVkaXRBdmF0YXJNb2RhbCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGV2dC5zdWJtaXR0ZXI7XG4gIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gIGFwaVxuICAgIC5lZGl0VXNlckluZm8oeyBuYW1lOiBuYW1lSW5wdXQudmFsdWUsIGFib3V0OiBqb2JJbnB1dC52YWx1ZSB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBwcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgICBwcm9maWxlSm9iRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XG4gICAgfSk7XG5cbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTmV3UG9zdFN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGV2dC5zdWJtaXR0ZXI7XG4gIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gIGFwaVxuICAgIC5hZGROZXdDYXJkKHsgbmFtZTogY2FwdGlvbklucHV0LnZhbHVlLCBsaW5rOiBsaW5rSW5wdXQudmFsdWUgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7IG5hbWU6IGRhdGEudmFsdWUsIGxpbms6IGRhdGEudmFsdWUgfTtcbiAgICAgIGNvbnN0IGNhcmRGaWxsID0gZ2V0Q2FyZFRlbXBsYXRlKGlucHV0VmFsdWVzKTtcbiAgICAgIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRGaWxsKTtcbiAgICAgIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcbiAgICB9KTtcbiAgZXZ0LnRhcmdldC5yZXNldCgpO1xuICBkaXNhYmxlQnV0dG9uKG5ld1Bvc3RTdWJtaXRCdXR0b24sIGNvbmZpZyk7XG59XG5cbm5ld1Bvc3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlTmV3UG9zdFN1Ym1pdCk7XG5jYXJkRGVsZXRlRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZURlbGV0ZVN1Ym1pdCk7XG5wcm9maWxlRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5hdmF0YXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQXZhdGFyU3VibWl0KTtcblxuZW5hYmxlVmFsaWRhdGlvbihjb25maWcpO1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldEFwcEluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgY29uc29sZS5sb2cobGluayk7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKHsgX2lkIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtfaWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBjaGFuZ2VMaWtlZCh7IF9pZCwgaXNMaWtlZCB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7X2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogaXNMaWtlZCA/IFwiREVMRVRFXCIgOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBlZGl0QXZhdGFyKGF2YXRhcikge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcixcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgeyBBcGkgfTtcbiJdLCJuYW1lcyI6WyJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0ZXh0Q29udGVudCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsImhhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiYWRkIiwicmVzZXRWYWxpZGF0aW9uIiwiZm9yRWFjaCIsImFwaSIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImJhc2VVcmwiLCJoZWFkZXJzIiwidGhpcyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJnZXRBcHBJbmZvIiwiUHJvbWlzZSIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwicmVqZWN0Iiwic3RhdHVzIiwibWV0aG9kIiwiZWRpdFVzZXJJbmZvIiwiX3JlZjIiLCJuYW1lIiwiYWJvdXQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZE5ld0NhcmQiLCJfcmVmMyIsImxpbmsiLCJjb25zb2xlIiwibG9nIiwiZGVsZXRlQ2FyZCIsIl9yZWY0IiwiX2lkIiwiY2hhbmdlTGlrZWQiLCJfcmVmNSIsImlzTGlrZWQiLCJlZGl0QXZhdGFyIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsImNhcmRzIiwibWUiLCJjYXJkIiwiY2FyZEZpbGwiLCJnZXRDYXJkVGVtcGxhdGUiLCJjYXJkc0xpc3QiLCJwcmVwZW5kIiwidXNlckluZm8iLCJkb2N1bWVudCIsInNyYyIsInByb2ZpbGVOYW1lRWxlbWVudCIsInByb2ZpbGVKb2JFbGVtZW50IiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImNhcmREZWxldGVNb2RhbCIsImNhcmREZWxldGVDbG9zZUJ1dHRvbiIsImNhcmREZWxldGVDYW5jZWxCdXR0b24iLCJjYXJkRGVsZXRlRm9ybSIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZWRpdFByb2ZpbGVNb2RhbCIsImVkaXRBdmF0YXJNb2RhbCIsImF2YXRhckNsb3NlQnV0dG9uIiwiYXZhdGFySW5wdXQiLCJhdmF0YXJGb3JtIiwiYXZhdGFySW1hZ2UiLCJlZGl0QXZhdGFyQnV0dG9uIiwiZWRpdENsb3NlQnV0dG9uIiwicHJvZmlsZUZvcm1FbGVtZW50IiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJjYXJkVGVtcGxhdGUiLCJuZXdQb3N0TW9kYWwiLCJuZXdQb3N0QnV0dG9uIiwibmV3UG9zdENsb3NlQnV0dG9uIiwibmV3UG9zdEZvcm0iLCJsaW5rSW5wdXQiLCJjYXB0aW9uSW5wdXQiLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3SW1hZ2UiLCJwcmV2aWV3Q2FwdGlvbiIsInByZXZpZXdDbG9zZUJ1dHRvbiIsIm5ld1Bvc3RTdWJtaXRCdXR0b24iLCJzZWxlY3RlZENhcmQiLCJzZWxlY3RlZENhcmRJZCIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkTmFtZUVsZW1lbnQiLCJjYXJkSW1hZ2VFbGVtZW50IiwiY2FyZExpa2VCdXR0b24iLCJjYXJkRGVsZXRlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwiY2FyZElkIiwidG9nZ2xlIiwiaGFuZGxlTGlrZSIsIm9wZW5Nb2RhbCIsImhhbmRsZUNhcmREZWxldGUiLCJhbHQiLCJtb2RhbCIsImhhbmRsZU92ZXJsYXlDbG9zZSIsImhhbmRsZUVzY0tleSIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwib3BlbmVkTW9kYWwiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0Iiwic3VibWl0QnV0dG9uIiwic3VibWl0dGVyIiwiZmluYWxseSIsInJlc2V0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9